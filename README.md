# Shared Memory Dictionary

共享内存字典



特性：

1. 使用共享内存存储数据，进程没了数据还在。
2. 提供多种容器（指针、数组、链表、哈希、红黑树等），以实现内存动态分配，接口类似STL。
3. 跨平台，Windows、Linux都能使用。
4. 全头文件，拷贝即可使用。



适用场景：

1. 有“热重启”（秒开）需求的进程，比如启动的时候需要从数据库加载大量数据。
2. 想进行“无感知更新”的进程。
3. 多个进程共享只读配置，想节约内存占用。



待办事项：

| 编号 | 内容                                                         | 状态                      |
| ---- | ------------------------------------------------------------ | ------------------------- |
| 1    | ShmMap的删除接口erase有bug，和std::map的结果不一致           | 已修正，20200917，xinyong |
| 2    | ShmMap的erase接口需要有返回下一个元素的功能                  | 已修正，20200917，xinyong |
| 3    | 伙伴系统的内存分配算法只适合分配大块内存，系统需要另一种内存分配算法与之配合，以实现高效的小块内存分配 |                           |
| 4    | Windows平台下共享内存引用计数为0的时候会被操作系统回收，想想是否有比较好的解决方法 |                           |
|      |                                                              |                           |
|      |                                                              |                           |
|      |                                                              |                           |
|      |                                                              |                           |



### 共享内存

查看共享内存，使用命令ipcs：

```
$ ipcs -m
```

删除共享内存，使用命令ipcrm：

```
$ ipcrm -m [shmid]
```

删除所有的共享内存，使用命令：

```
$ ipcrm -a
```

